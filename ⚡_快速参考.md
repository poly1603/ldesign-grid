# âš¡ Grid åº“å¿«é€Ÿå‚è€ƒ

> @ldesign/grid v2.0 - ä¸€åˆ†é’Ÿä¸Šæ‰‹æŒ‡å—

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…
```bash
pnpm add @ldesign/grid
```

### Vue 3 åŸºç¡€ç”¨æ³•
```vue
<script setup>
import { GridStack, GridItem, GridDragSource } from '@ldesign/grid/vue'
</script>

<template>
  <!-- æ‹–æ‹½æº -->
  <GridDragSource :data="{ name: 'ç»„ä»¶' }" :item-options="{ w: 4, h: 3 }">
    æ‹–æˆ‘
  </GridDragSource>

  <!-- Grid -->
  <GridStack>
    <GridItem :id="'1'" :x="0" :y="0" :w="4" :h="3">å†…å®¹</GridItem>
  </GridStack>
</template>
```

### React åŸºç¡€ç”¨æ³•
```tsx
import { GridStack, GridItem, GridDragSource } from '@ldesign/grid/react'

<GridDragSource data={{ name: 'ç»„ä»¶' }} itemOptions={{ w: 4, h: 3 }}>
  æ‹–æˆ‘
</GridDragSource>

<GridStack>
  <GridItem id="1" x={0} y={0} w={4} h={3}>å†…å®¹</GridItem>
</GridStack>
```

---

## ğŸ¯ æ ¸å¿ƒ API

### GridStack ç»„ä»¶
```vue
<GridStack 
  :options="{
    column: 12,           // åˆ—æ•°
    cellHeight: 70,       // å•å…ƒæ ¼é«˜åº¦
    acceptWidgets: true,  // æ¥å—å¤–éƒ¨æ‹–æ‹½
    animate: true         // å¯ç”¨åŠ¨ç”»
  }"
  @dropped="handleDropped"
  @change="handleChange"
/>
```

### GridItem ç»„ä»¶
```vue
<GridItem
  id="item-1"           // å”¯ä¸€æ ‡è¯†
  :x="0"                // X ä½ç½®
  :y="0"                // Y ä½ç½®
  :w="4"                // å®½åº¦
  :h="3"                // é«˜åº¦
  :locked="false"       // æ˜¯å¦é”å®š
  :no-resize="false"    // ç¦æ­¢è°ƒæ•´å¤§å°
  :no-move="false"      // ç¦æ­¢ç§»åŠ¨
>
  å†…å®¹
</GridItem>
```

### GridDragSource ç»„ä»¶
```vue
<GridDragSource
  :data="widget"                    // ä¼ é€’çš„æ•°æ®
  :item-options="{ w: 4, h: 3 }"   // Grid é¡¹é…ç½®
  :disabled="false"                 // æ˜¯å¦ç¦ç”¨
  @dragstart="handleStart"          // å¼€å§‹æ‹–æ‹½
  @dragend="handleEnd"              // ç»“æŸæ‹–æ‹½
  @dropped="handleDropped"          // æˆåŠŸæ”¾ç½®
>
  æ‹–æ‹½æˆ‘
</GridDragSource>
```

---

## âŒ¨ï¸ é”®ç›˜å¿«æ·é”®

### å¯¼èˆª
- `â†‘â†“â†â†’` - ç§»åŠ¨ç„¦ç‚¹
- `Tab` - ä¸‹ä¸€é¡¹
- `Shift+Tab` - ä¸Šä¸€é¡¹
- `Home` - ç¬¬ä¸€é¡¹
- `End` - æœ€åä¸€é¡¹

### æ“ä½œ
- `Delete` - åˆ é™¤
- `Ctrl+C` - å¤åˆ¶
- `Ctrl+X` - å‰ªåˆ‡
- `Ctrl+V` - ç²˜è´´
- `Ctrl+A` - å…¨é€‰
- `Ctrl+Z` - æ’¤é”€
- `Ctrl+Y` - é‡åš
- `Esc` - å–æ¶ˆé€‰æ‹©

---

## ğŸ¨ è‡ªåŠ¨å¸ƒå±€

```javascript
const layoutEngine = grid.getLayoutEngine()

layoutEngine.autoLayout('compact')   // ç´§å‡‘å¸ƒå±€
layoutEngine.autoLayout('flow')      // æµå¼å¸ƒå±€
layoutEngine.autoLayout('grid')      // ç½‘æ ¼å¸ƒå±€
layoutEngine.autoLayout('masonry')   // ç€‘å¸ƒæµ
layoutEngine.autoLayout('columns')   // åˆ—å¸ƒå±€
```

---

## ğŸ¬ åŠ¨ç”»æ•ˆæœ

```javascript
const animation = grid.getAnimationManager()

// æ·»åŠ é¡¹ç›®åŠ¨ç”»
await animation.animateAdd(item, 'fade')
await animation.animateAdd(item, 'slide')
await animation.animateAdd(item, 'scale')

// ç‰¹æ•ˆ
await animation.pulse(item, 3)      // è„‰åŠ¨
await animation.shake(item)         // éœ‡åŠ¨
await animation.flash(item)         // é—ªçƒ
```

---

## ğŸ’¾ ä¿å­˜å’ŒåŠ è½½

```javascript
// ä¿å­˜å¸ƒå±€
const layout = grid.save()
localStorage.setItem('layout', JSON.stringify(layout))

// åŠ è½½å¸ƒå±€
const layout = JSON.parse(localStorage.getItem('layout'))
grid.load(layout)

// IndexedDB ä¿å­˜ï¼ˆæ¨èï¼‰
import { saveToIndexedDB, loadFromIndexedDB } from '@ldesign/grid'

await saveToIndexedDB('mydb', 'layouts', 'dashboard', layout)
const layout = await loadFromIndexedDB('mydb', 'layouts', 'dashboard')
```

---

## ğŸ“Š å¯¼å‡º

```javascript
import { 
  downloadAsImage,
  downloadAsSVG,
  downloadAsCSV,
  downloadAsJSON 
} from '@ldesign/grid'

// å¯¼å‡ºä¸ºå›¾ç‰‡
await downloadAsImage(grid, 'my-grid', { format: 'png' })

// å¯¼å‡ºä¸º SVG
downloadAsSVG(grid, 'my-grid')

// å¯¼å‡ºä¸º CSV
downloadAsCSV(grid, 'my-grid')

// å¯¼å‡ºä¸º JSON
downloadAsJSON(grid, 'my-grid')
```

---

## ğŸ¯ å¤šé€‰æ“ä½œ

```javascript
const selection = grid.getSelectionManager()

// é€‰æ‹©
selection.select(item)
selection.selectAll()

// è·å–é€‰ä¸­
const selected = selection.getSelectedItems()

// æ‰¹é‡æ“ä½œ
selection.updateSelected({ w: 6 })
selection.removeSelected()
selection.duplicateSelected()

// å¯¹é½
selection.alignSelected('left')
selection.alignSelected('center')
selection.distributeSelected('horizontal')
```

---

## â®ï¸ æ’¤é”€/é‡åš

```javascript
const history = grid.getHistoryManager()

// æ’¤é”€/é‡åš
history.undo()
history.redo()

// æ£€æŸ¥çŠ¶æ€
history.canUndo()
history.canRedo()

// åˆ›å»ºæ£€æŸ¥ç‚¹
history.createCheckpoint('é‡è¦èŠ‚ç‚¹')
```

---

## â™¿ æ— éšœç¢

```javascript
const a11y = grid.getAccessibilityManager()

// å¯ç”¨é«˜å¯¹æ¯”åº¦
a11y.enableHighContrast()

// è‡ªå®šä¹‰å…¬å‘Š
a11y.announce('æ“ä½œæˆåŠŸ', 'polite')

// éªŒè¯æ— éšœç¢
const issues = a11y.validate()
```

---

## ğŸ“± è§¦æ‘¸æ”¯æŒ

è§¦æ‘¸è®¾å¤‡è‡ªåŠ¨æ”¯æŒï¼Œæ— éœ€é¢å¤–é…ç½®ï¼

- âœ… è§¦æ‘¸æ‹–æ‹½
- âœ… å¤šç‚¹è§¦æ§æ£€æµ‹
- âœ… ç§»åŠ¨ç«¯ä¼˜åŒ–
- âœ… è‡ªåŠ¨é€‚é…

---

## âš¡ æ€§èƒ½ä¼˜åŒ–

### è‡ªåŠ¨ä¼˜åŒ–
```javascript
// å¤§å‹ç½‘æ ¼è‡ªåŠ¨å¯ç”¨è™šæ‹Ÿæ»šåŠ¨ï¼ˆ50+ é¡¹ï¼‰
const grid = manager.create(container, {
  performance: {
    virtualScroll: true,
    batchUpdate: true,
    lazyRender: true
  }
})
```

### æ‰¹é‡æ“ä½œ
```javascript
const batch = grid.getBatchUpdateManager()

// æ‰¹é‡æ·»åŠ 
batch.batch(() => {
  for (let i = 0; i < 100; i++) {
    grid.addItem(element, options)
  }
})
```

---

## ğŸ¨ é¢„è®¾å¸ƒå±€

```javascript
import { getPreset } from '@ldesign/grid/presets'

// åŠ è½½é¢„è®¾
const dashboardLayout = getPreset('dashboard')
const kanbanLayout = getPreset('kanban')
const blogLayout = getPreset('blog')

grid.load(dashboardLayout)
```

å¯ç”¨é¢„è®¾ï¼š
- `dashboard` - ä»ªè¡¨ç›˜
- `kanban` - çœ‹æ¿
- `blog` - åšå®¢
- `analytics` - åˆ†æ
- `portfolio` - ä½œå“é›†
- `admin` - ç®¡ç†é¢æ¿
- `gallery` - ç”»å»Š
- `empty` - ç©ºç™½

---

## ğŸ”§ å¸¸ç”¨é…ç½®

### åŸºç¡€é…ç½®
```javascript
{
  column: 12,              // 12 åˆ—ç½‘æ ¼
  cellHeight: 70,          // å•å…ƒæ ¼ 70px
  acceptWidgets: true,     // æ¥å—å¤–éƒ¨æ‹–æ‹½
  float: true,             // æµ®åŠ¨æ¨¡å¼
  animate: true,           // åŠ¨ç”»æ•ˆæœ
  disableResize: false,    // å…è®¸è°ƒæ•´å¤§å°
  disableDrag: false       // å…è®¸æ‹–æ‹½
}
```

### æ€§èƒ½é…ç½®
```javascript
{
  performance: {
    virtualScroll: true,   // è™šæ‹Ÿæ»šåŠ¨ï¼ˆ50+ é¡¹è‡ªåŠ¨å¯ç”¨ï¼‰
    batchUpdate: true,     // æ‰¹é‡æ›´æ–°
    lazyRender: false      // å»¶è¿Ÿæ¸²æŸ“
  }
}
```

### åµŒå¥—é…ç½®
```javascript
{
  nested: {
    enabled: true,         // å¯ç”¨åµŒå¥—
    maxDepth: 3           // æœ€å¤§åµŒå¥—æ·±åº¦
  }
}
```

---

## ğŸ¯ äº‹ä»¶ç›‘å¬

### Vue
```vue
<GridStack
  @added="handleAdded"
  @removed="handleRemoved"
  @change="handleChange"
  @dragstart="handleDragStart"
  @dragstop="handleDragStop"
  @dropped="handleDropped"
/>
```

### React
```tsx
<GridStack
  onAdded={handleAdded}
  onRemoved={handleRemoved}
  onChange={handleChange}
  onDragStart={handleDragStart}
  onDragStop={handleDragStop}
  onDropped={handleDropped}
/>
```

---

## ğŸ“– æ–‡æ¡£å¿«é€Ÿé“¾æ¥

- ğŸ“˜ [å®Œæ•´ä¸­æ–‡æ–‡æ¡£](docs/zh-CN/README.md)
- â­ [å¤–éƒ¨æ‹–æ‹½æŒ‡å—](docs/guide/external-drag.md)
- ğŸ¯ [åŠŸèƒ½æ€»ç»“](FEATURE_SUMMARY.md)
- ğŸ“‹ [å˜æ›´æ—¥å¿—](CHANGELOG.md)
- ğŸŠ [å®ŒæˆæŠ¥å‘Š](FINAL_COMPLETION_REPORT.md)

---

## ğŸ’¡ å®ç”¨æŠ€å·§

### 1. è°ƒè¯•æ¨¡å¼
```javascript
import { logger } from '@ldesign/grid'

logger.configure({ level: LogLevel.DEBUG })
```

### 2. æ€§èƒ½ç›‘æ§
```javascript
const stats = grid.getStats()
console.log(stats.fps, stats.itemCount, stats.memoryUsage)
```

### 3. è·å–ç®¡ç†å™¨
```javascript
const history = grid.getHistoryManager()
const selection = grid.getSelectionManager()
const keyboard = grid.getKeyboardManager()
const layout = grid.getLayoutEngine()
const animation = grid.getAnimationManager()
```

---

**ğŸ‰ äº«å—ä½¿ç”¨ @ldesign/grid v2.0ï¼**

